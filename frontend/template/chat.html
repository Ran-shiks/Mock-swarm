<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mega-Bot AI</title>
    <style>
        /* Import Google Font - Poppins */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');
    </style>
    <link rel="stylesheet" href="/static/style.css">
        <link rel="stylesheet" href="/static/chat.css">    

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>

<div class="grid">
  <svg class="grid-svg" xmlns="http://www.w3.org/2000/svg" width="982" height="786" viewBox="0 0 982 786" fill="none">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M490 401V537H348.5V401H490ZM490 785.5V676H348.5V785.5H347.5V676H206V785.5H205V676H63.5V785.5H62.5V676H0V675H62.5V538H0V537H62.5V401H0V400H62.5V258H0V257H62.5V116H0V115H62.5V0H63.5V115L205 115V0H206V115L347.5 115V0H348.5V115H490V0H491V115L627.5 115V0H628.5V115H765V0H766V115L902.5 115V0H903.5V115H982V116H903.5V257H982V258H903.5V400H982V401H903.5V537H982V538H903.5V675H982V676H903.5V785.5H902.5V676H766V785.5H765V676H628.5V785.5H627.5V676H491V785.5H490ZM902.5 675V538H766V675H902.5ZM902.5 537V401H766V537H902.5ZM902.5 400V258H766V400H902.5ZM902.5 257V116L766 116V257H902.5ZM627.5 675H491V538H627.5V675ZM765 675H628.5V538H765V675ZM348.5 675H490V538H348.5V675ZM347.5 538V675H206V538H347.5ZM205 538V675H63.5V538H205ZM765 537V401H628.5V537H765ZM765 400V258H628.5V400H765ZM765 257V116H628.5V257H765ZM347.5 401V537H206V401H347.5ZM205 401V537H63.5V401H205ZM627.5 401V537H491V401H627.5ZM627.5 116L491 116V257H627.5V116ZM627.5 258H491V400H627.5V258ZM63.5 257V116L205 116V257H63.5ZM63.5 400V258H205V400H63.5ZM206 116V257H347.5V116L206 116ZM348.5 116V257H490V116H348.5ZM206 400V258H347.5V400H206ZM348.5 258V400H490V258H348.5Z" fill="url(#paint0_radial_1_8)" />
    <defs>
      <radialGradient id="paint0_radial_1_8" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(491 392.75) rotate(90) scale(513.25 679.989)">
        <stop stop-color="white" stop-opacity="0.2" />
        <stop offset="1" stop-color="#000" stop-opacity="0" />
      </radialGradient>
    </defs>
  </svg>
  <div class="blur"></div>
</div>

<nav>
  <p class="sitename">MOCKSWARM</p>
  <p class="menu">Services</p>
  <p class="menu">Pricing</p>
  <p class="menu">Features</p>
  <p class="menu">About us</p>
  <svg class="material-icons" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"><path d="M0 0h24v24H0z" fill="none"/><path d="M19 9H5c-.55 0-1 .45-1 1s.45 1 1 1h14c.55 0 1-.45 1-1s-.45-1-1-1zM5 15h14c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1 .45-1 1s.45 1 1 1z"/></svg>
</nav>

<header class="header">
    <h1 class="title">Hello, there</h1>
    <p class="subtitle">How can I help you today?</p>
 
</header>

<div class="grid">
  <svg class="grid-svg" xmlns="http://www.w3.org/2000/svg" width="982" height="786" viewBox="0 0 982 786" fill="none">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M490 401V537H348.5V401H490ZM490 785.5V676H348.5V785.5H347.5V676H206V785.5H205V676H63.5V785.5H62.5V676H0V675H62.5V538H0V537H62.5V401H0V400H62.5V258H0V257H62.5V116H0V115H62.5V0H63.5V115L205 115V0H206V115L347.5 115V0H348.5V115H490V0H491V115L627.5 115V0H628.5V115H765V0H766V115L902.5 115V0H903.5V115H982V116H903.5V257H982V258H903.5V400H982V401H903.5V537H982V538H903.5V675H982V676H903.5V785.5H902.5V676H766V785.5H765V676H628.5V785.5H627.5V676H491V785.5H490ZM902.5 675V538H766V675H902.5ZM902.5 537V401H766V537H902.5ZM902.5 400V258H766V400H902.5ZM902.5 257V116L766 116V257H902.5ZM627.5 675H491V538H627.5V675ZM765 675H628.5V538H765V675ZM348.5 675H490V538H348.5V675ZM347.5 538V675H206V538H347.5ZM205 538V675H63.5V538H205ZM765 537V401H628.5V537H765ZM765 400V258H628.5V400H765ZM765 257V116H628.5V257H765ZM347.5 401V537H206V401H347.5ZM205 401V537H63.5V401H205ZM627.5 401V537H491V401H627.5ZM627.5 116L491 116V257H627.5V116ZM627.5 258H491V400H627.5V258ZM63.5 257V116L205 116V257H63.5ZM63.5 400V258H205V400H63.5ZM206 116V257H347.5V116L206 116ZM348.5 116V257H490V116H348.5ZM206 400V258H347.5V400H206ZM348.5 258V400H490V258H348.5Z" fill="url(#paint0_radial_1_8)" />
    <defs>
      <radialGradient id="paint0_radial_1_8" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(491 392.75) rotate(90) scale(513.25 679.989)">
        <stop stop-color="white" stop-opacity="0.2" />
        <stop offset="1" stop-color="#000" stop-opacity="0" />
      </radialGradient>
    </defs>
  </svg>
  <div class="blur"></div>
</div>

<div class="chat-list"></div>

<div class="typing-area">
    <form class="typing-form">
        <div class="input-wrapper">
            <input type="text" placeholder="Enter a prompt here" class="typing-input" required />
            <button id="send-message-button" class="icon material-symbols-rounded">send</button>
        </div>
        <div class="action-buttons">
            <span id="theme-toggle-button" class="icon material-symbols-rounded">light_mode</span>
            <span id="delete-chat-button" class="icon material-symbols-rounded">delete</span>
        </div>
    </form>
    <p class="disclaimer-text">
        Mega-Bot may display inaccurate info, including about people, so double-check its responses.
    </p>
</div>

<script>
    const typingForm = document.querySelector(".typing-form");
    const chatContainer = document.querySelector(".chat-list");
    const suggestions = document.querySelectorAll(".suggestion");
    const toggleThemeButton = document.querySelector("#theme-toggle-button");
    const deleteChatButton = document.querySelector("#delete-chat-button");

    // State variables
    let userMessage = null;
    let isResponseGenerating = false;

    // Predefined responses
    const predefinedResponses = {
        "hi": "Hello! How may I assist you?",
        "hello": "Hello! How may I assist you?",
        "hello there": "Hello! How may I assist you?",
        "how are you": "I'm doing well, thank you for asking!",
        "what's your name?": "I'm Mega-Bot, your friendly AI assistant!",
        "tell me a joke": "Why don't scientists trust atoms? Because they make up everything!",
        "what is your purpose?": "My purpose is to assist you with information and tasks to the best of my ability.",
        "can you help me with my homework?": "I can certainly try! What subject are you working on?",
        "what is the weather like today?": "I don't have access to real-time weather data, but I can suggest a weather website.",
        "what is the capital of France?": "The capital of France is Paris.",
        "what programming languages do you know?": "I have knowledge of JavaScript, Python, Java, and many others.",
        "write javascript code to sum all elements in an array.": `function sumArray(arr) {
    let sum = 0;
    for (let i = 0; i < arr.length; i++) {
        sum += arr[i];
    }
    return sum;
}`
    };

    // Load theme from local storage on page load
    const loadThemeFromLocalstorage = () => {
        const isLightMode = (localStorage.getItem("themeColor") === "light_mode");
        document.body.classList.toggle("light_mode", isLightMode);
        toggleThemeButton.innerText = isLightMode ? "dark_mode" : "light_mode";
    };

    // Create a new message element and return it
    const createMessageElement = (content, ...classes) => {
        const div = document.createElement("div");
        div.classList.add("message", ...classes);
        div.innerHTML = content;
        return div;
    };

    // Show typing effect by displaying words one by one
    const showTypingEffect = (text, textElement, incomingMessageDiv) => {
        const words = text.split(' ');
        let currentWordIndex = 0;
        const typingInterval = setInterval(() => {
            textElement.innerText += (currentWordIndex === 0 ? '' : ' ') + words[currentWordIndex++];
            incomingMessageDiv.querySelector(".icon").classList.add("hide");
            if (currentWordIndex === words.length) {
                clearInterval(typingInterval);
                isResponseGenerating = false;
                incomingMessageDiv.querySelector(".icon").classList.remove("hide");
            }
            chatContainer.scrollTo(0, chatContainer.scrollHeight);
        }, 30);
    };

    // Show predefined response - with 1-second delay
    const showPredefinedResponse = (incomingMessageDiv, textElement) => {
        setTimeout(() => {
            const normalizedUserMessage = userMessage.toLowerCase().trim();
            const response = predefinedResponses[normalizedUserMessage] || "I'm sorry, I don't have an answer for that yet. Please try another prompt.";
            showTypingEffect(response, textElement, incomingMessageDiv);
        }, 1000);
    };

    // Show a loading animation while waiting for the API response
    const showLoadingAnimation = () => {
        const html = `<div class="message-content">
                        <img class="avatar" src="/static/images/chat.png" alt="Chat avatar">
                        <p class="text"></p>
                        <div class="loading-indicator">
                            <div class="loading-bar"></div>
                            <div class="loading-bar"></div>
                            <div class="loading-bar"></div>
                        </div>
                    </div>
                    <span onClick="copyMessage(this)" class="icon material-symbols-rounded">content_copy</span>`;
        const incomingMessageDiv = createMessageElement(html, "incoming", "loading");
        chatContainer.appendChild(incomingMessageDiv);
        chatContainer.scrollTo(0, chatContainer.scrollHeight);
        const textElement = incomingMessageDiv.querySelector(".text");

        showPredefinedResponse(incomingMessageDiv, textElement);
    };

    // Copy message text to the clipboard
    const copyMessage = (copyButton) => {
        const messageText = copyButton.parentElement.querySelector(".text").innerText;
        navigator.clipboard.writeText(messageText);
        copyButton.innerText = "done";
        setTimeout(() => copyButton.innerText = "content_copy", 1000);
    };

    // Handle sending outgoing chat messages
    const handleOutgoingChat = () => {
        userMessage = typingForm.querySelector(".typing-input").value.trim();
        if (!userMessage || isResponseGenerating) return;

        isResponseGenerating = true;

        const html = `<div class="message-content">
                        <img class="avatar" src="/static/images/user.png" alt="User avatar">
                        <p class="text"></p>
                      </div>`;
        const outgoingMessageDiv = createMessageElement(html, "outgoing");
        outgoingMessageDiv.querySelector(".text").innerText = userMessage;
        chatContainer.appendChild(outgoingMessageDiv);

        typingForm.reset();
        document.body.classList.add("hide-header");
        chatContainer.scrollTo(0, chatContainer.scrollHeight);

        showLoadingAnimation();
    };

    // Toggle between light and dark themes
    toggleThemeButton.addEventListener("click", () => {
        const isLightMode = document.body.classList.toggle("light_mode");
        localStorage.setItem("themeColor", isLightMode ? "light_mode" : "dark_mode");
        toggleThemeButton.innerText = isLightMode ? "dark_mode" : "light_mode";
    });

    // Delete all chats from local storage
    deleteChatButton.addEventListener("click", () => {
       // no operation
    });

    // Handle suggestion clicks
    if (suggestions.length > 0) {
        suggestions.forEach(suggestion => {
            suggestion.addEventListener("click", () => {
                userMessage = suggestion.querySelector(".text").innerText;
                handleOutgoingChat();
            });
        });
    }

    // Handle form submission
    typingForm.addEventListener("submit", (e) => {
        e.preventDefault();
        handleOutgoingChat();
    });

    // Load saved theme
    loadThemeFromLocalstorage();

    // Clear any existing messages from localStorage on page load
    localStorage.removeItem('chatHistory');
    chatContainer.innerHTML = '';

</script>

</body>
</html>